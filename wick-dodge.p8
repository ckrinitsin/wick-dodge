pico-8 cartridge // http://www.pico-8.com
version 43
__lua__

function _init()
	palt(12, true)
	palt(0, false)
 music(0)
end

function _update()
 player_update()
end

function _draw()
	cls()
	map()
	spr(player.sprite,
	 player.posx-player.radius,
	 player.posy-player.radius)
end
-->8
player = {
 posx = 50,
 posy = 50,
 velx = 0,
 vely = 0,
 vel_factor = 1,
 vel_loose = 0.75,
 timing = 0.20,
 sprite = 17,
 hitbox_radius = 2,
 radius = 4,
}

function player_update()
	input()
 movement()
	animate()
end

function input()
	if btn(0) then player.velx-=player.vel_factor end  --left
	if btn(1) then player.velx+=player.vel_factor end  --right
	if btn(2) then player.vely-=player.vel_factor end  --up
	if btn(3) then player.vely+=player.vel_factor end  --down
end

function map_collision(x,y,flag)
 return fget(mget(x,y),flag)
end

function border_collision()
	if map_collision((player.posx-player.hitbox_radius)\8,
	 (player.posy-player.hitbox_radius)\8,0)
      or map_collision((player.posx+player.hitbox_radius)\8,
	    (player.posy+player.hitbox_radius)\8,0)
	 then
	 player.posx-=player.velx
	 player.posy-=player.vely
	 player.velx*=-1
	 player.vely*=-1
	end
end

function movement()
	player.posx+=player.velx
	player.posy+=player.vely
	border_collision()
	player.velx*=player.vel_loose
	player.vely*=player.vel_loose
end

function animate()
 player.sprite+=player.timing
 if player.sprite >= 22 then player.sprite = 17 end
end
__gfx__
000000006665566666605666d0ddd0dd6566656655555555dddddd0000dddddddddddddd00000000dddddd0000dddddddddddddddddddddddddddddd00000000
0000000056666665560666650d000d005555555555555555dddddd0000dddddddddddddd00000000dddddd0000dddddddddddddddddddddddddddddd00000000
007007006655666666506666d0ddd0dd6665666555555555dddddd0000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000
000770006666665566dad6550d000d005555555555555555dddddd0000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000
000770005566666655dad666d0ddd0dd6566656655555555dddddd0000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000
0070070066665566666d55660d000d005555555555555555dddddd0000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000
000000006556666665566666d0ddd0dd6665666555555555dddddd0000dddddd00000000dddddddddddddddddddddddd00dddddddddddd00dddddddd00000000
0000000066666655666666550d000d005555555555555555dddddd0000dddddd00000000dddddddddddddddddddddddd00dddddddddddd00dddddddd00000000
00000000cccccccccccccccccccccccccccccccccccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccc0ccccccccccccccccccccc0cccccccc0cccc00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccccc0ccccc0cccccc0cccccccc0cccccccc0ccc00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccc7777ccccc0cccccc0ccccccc77cccccc777cc00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc77777cccc777ccccc77ccccc7777cccc7777cc00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc7777cccc77777ccc7777ccc77777cccc77777c00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc7777cccc7777ccc77777ccc77777cccc77777c00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000c777777cc777777c7777777c7777777cc777777c00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000cccc82ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccc8882cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccc8888cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000cccc88ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0e0e0e0e0e0e0e0e0e0e0e0e0e0e0e0e05050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0e0e0e0e0e0e0e0e0e0e0e0e0e0e0e0e05050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d08080808080808080808080808080c05050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0605050505050505050505050505050705050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a09090909090909090909090909090b05050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
011000200e775117750e775117750e775117750e775117750e775117750e775117750e775117750e7751177517775187751777518775177751877517775187751077513775107751377510775137751077513775
0110000000073006003f6000060034673006000060000600000730060000600006003467300600006000060000073006000060000600346733460300600006000007300600006000060034673006000060000600
011000001d3401d3311d3211d3111d3401d3311d3211d311213402133121321213111a3401a3311a3211a3111c3401c3311c3211c311243402433123340233312434024331243212431121340213312132121311
012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0110000000073006000000000073346730060000073000030c0030c00300073006003467300600006000060000073006000007300600346733460300600006000007300600006002460034673006000060000600
011000002d4222d422294222942232422324222b4222b4222942229422284222842229422294222642228422244222442228422284222b4222b42228422284222642226422264222642224422244222442224422
__music__
01 00014244
01 00010244
00 00010244
00 00040244
00 00040244
00 00010205
00 00010205
00 00040205
02 00040205

